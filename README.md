# nfc-timing-2025_V2



NFC 跑手計時系統 (NFC Race Timing System)
一個基於網頁的全方位賽事計時與管理系統，採用 NFC 技術追蹤參賽者打卡記錄，後端依託 Supabase (PostgreSQL) 進行數據儲存與即時更新，透過 Chart.js 實現數據視覺化，並以原生 JavaScript 開發前端介面，專為賽事籌辦方設計。
📋 專案概述
本系統為賽事主辦單位提供完整解決方案，可即時追蹤參賽者各檢查點打卡記錄、管理排名、視覺化賽事進度。支援多檢查點設定、CSV 匯入匯出功能，並具備管理員級別的數據管理介面，擁有響應式設計，適用於桌面與行動裝置。
核心功能
功能	說明
🚀 即時追蹤	透過 Supabase Realtime 即時更新參賽者打卡記錄
🏆 多模式排名	支援依槍時間、晶片時間或各檢查點分段成績排名
📊 賽事儀表板	透過圖表視覺化賽事進度（未開始 / 進行中 / 已完賽人數）
👥 參賽者管理	新增 / 編輯 / 刪除參賽者、CSV 批次匯入匯出
🚩 檢查點配置	自訂賽事檢查點（必填 / 非必填、排序設定）
📱 響應式設計	行動裝置友善介面，最佳化各尺寸螢幕顯示
🔒 數據安全	重要操作需確認提示，刪除邏輯符合安全規範
📝 操作日誌	即時記錄所有系統操作事件，便於追蹤與除錯

🛠️ 技術架構
前端
原生 JavaScript (ES6+)
HTML5/CSS3（響應式設計、客製化樣式）
Chart.js v4（數據視覺化，賽事進度環狀圖）
CSS Flexbox/Grid 響應式網格佈局
後端 / 資料庫
Supabase (PostgreSQL) 數據儲存
Supabase Realtime 即時更新功能
Supabase REST API 執行 CRUD 操作
核心技術實現
安全刪除機制：實作符合 Supabase 規範的 DELETE 操作（必須包含 WHERE 子句）
即時訂閱：監聽資料庫變更（INSERT/DELETE）並即時更新介面
時間計算：精確計算各檢查點間耗時（格式化為 HH:MM:SS）
CSV 處理：匯入匯出支援 UTF-8 BOM，解決中文亂碼問題
自動刷新：後台每 5 秒自動刷新數據，同時保留手動刷新選項

📁 資料庫結構
核心資料表
participants（參賽者）
欄位	類型	說明
bib_number	TEXT (主鍵)	參賽者唯一編號（號碼布）
name	TEXT	參賽者姓名
checkins（打卡記錄）
欄位	類型	說明
id	UUID (主鍵)	自動生成的唯一識別碼
bib_number	TEXT	關聯至參賽者的外部鍵
checkpoint	TEXT	檢查點代碼（START/FINISH/CP1 等）
time	TIMESTAMP	精確打卡時間戳記
checkpoint_configs（檢查點配置）
欄位	類型	說明
code	TEXT	檢查點唯一代碼
name	TEXT	顯示名稱（如：起點、終點）
order_index	INTEGER	賽事中的順序編號
is_required	BOOLEAN	是否為必經檢查點
event_id	TEXT	賽事識別碼（預設："default"）

🚀 快速開始
先備條件
Supabase 帳戶與專案
Supabase URL 與 anon/public 金鑰
基礎網頁伺服器（或直接在瀏覽器開啟 HTML 檔）
設定步驟
複製儲存庫
bash
运行
git clone [你的儲存庫URL]
cd nfc-race-timing
設定 Supabase
建立上述資料庫結構中的資料表
從專案設定取得 Supabase URL 與 anon 金鑰
執行應用程式
在現代瀏覽器開啟 HTML 檔
在管理面板輸入 Supabase URL 與金鑰
點擊「連線後台」按鈕
設定賽事參數
點擊「👥 管理參賽者」設定檢查點與參賽者資料
透過 CSV 匯入或手動新增參賽者
使用說明
儀表板視圖：監控整體賽事進度與核心統計數據
排名視圖：依不同指標檢視詳細排名
打卡記錄視圖：查看所有檢查點記錄，支援篩選功能
數據管理：匯入 / 匯出數據或清空所有記錄（需確認）

🎨 介面特色
獎牌高亮：前三名參賽者以金 / 銀 / 銅色背景標示
即時日誌：記錄所有系統事件（新打卡、數據變更等）
統計卡片：核心指標展示（總人數 / 已出發 / 已完賽人數、平均完賽時間）
互動式圖表：視覺化賽事進度，支援滑鼠懸停顯示詳細資訊
彈窗介面：整潔的參賽者管理表單，含表單驗證

⚠️ 重要注意事項
數據安全：所有刪除操作需二次確認，防止誤刪數據
Supabase 設定：請依使用情境適當配置列級安全性（RLS）
備份建議：定期透過 CSV 匯出功能備份數據
時區設定：系統使用瀏覽器當地時區顯示時間
效能最佳化：僅載入最近 100 筆打卡記錄以確保效能

🌐 在地化支援
介面語言：繁體中文（香港）
時間格式：24 小時制（HH:MM:SS）
日期格式：DD/MM/YYYY（香港標準）
支援 UTF-8 編碼，確保中文字元正常顯示

🛡️ 安全考量
所有敏感操作（刪除、清空全部）均需確認提示
Supabase 憑證儲存在 localStorage（公開部署時不建議使用）
原始程式碼中無硬編碼憑證
刪除操作符合 Supabase 安全規則

📱 行動裝置支援
響應式網格佈局，適配行動裝置螢幕
適合觸控操作的按鈕與表單元素
最佳化的表格滾動體驗
針對行動裝置最佳化的圖表顯示

🤝 貢獻方式
Fork 本儲存庫
建立功能分支 (git checkout -b feature/新功能)
提交變更 (git commit -m '新增某項功能')
推送至分支 (git push origin feature/新功能)
開啟 Pull Request

📄 授權條款
本專案採用開源授權，基於 MIT 授權條款 釋出。

📸 截圖展示（選擇性）
(在此處新增系統截圖，展示介面特色)
儀表板視圖 - 整體賽事統計與進度圖表
排名視圖 - 詳細參賽者排名，含獎牌高亮效果
打卡記錄視圖 - 可篩選的檢查點記錄列表
參賽者管理 - CSV 匯入與手動新增介面

✨ 未來優化方向
新增賽事分類（年齡組、賽事類型）
實作使用者身分驗證，支援多管理員存取
新增賽事成績列印功能
整合 NFC 硬體 API
新增賽事路線地圖視覺化
實作進階分析與報表功能
